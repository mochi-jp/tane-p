<!-- 入力欄などは変更なし、省略 -->
<script>
  function calculate() {
    const totalPages = parseInt(document.getElementById("totalPages").value, 10);
    const seedNumber = parseInt(document.getElementById("seedNumber").value, 10);

    if (isNaN(totalPages) || isNaN(seedNumber)) {
      document.getElementById("result").textContent = "入力不備";
      return;
    }

    const result = totalPages - Math.floor(seedNumber / 12);
    document.getElementById("result").textContent = result;
  }

  const totalPagesInput = document.getElementById("totalPages");
  const seedNumberInput = document.getElementById("seedNumber");

  // ⬇ iPhone Safari対応：Enterで次に進みつつキーボード出す
  totalPagesInput.addEventListener("keydown", (e) => {
    if (e.key === "Enter") {
      e.preventDefault();
      setTimeout(() => {
        seedNumberInput.focus();
        seedNumberInput.click(); // 擬似タップでキーボード強制表示
      }, 100);
    }
  });

  totalPagesInput.addEventListener("blur", () => {
    if (totalPagesInput.value !== "") {
      setTimeout(() => {
        seedNumberInput.focus();
        seedNumberInput.click(); // blurでも保険で出す
      }, 100);
    }
  });

  seedNumberInput.addEventListener("keydown", (e) => {
    if (e.key === "Enter") {
      e.preventDefault();
      calculate();
      document.getElementById("calcBtn").blur();
    }
  });

  seedNumberInput.addEventListener("blur", () => {
    if (seedNumberInput.value !== "") {
      calculate();
    }
  });
</script>
